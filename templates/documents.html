<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Skunk Works Sample Title</title>
    <link rel="stylesheet" href="{{ url_for('static', filename = 'styles.css') }}" />

    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v6.0.0/dist/aframe-extras.min.js"></script>
</head>
<body>

    <a-scene class="ascene">
        <a-assets>
            <a-asset-item id="door" src="{{ url_for('static', filename='models/door/scene.gltf') }}"></a-asset-item>
            <a-mixin id="cube" geometry="primitive: box" scale="0.9 0.9 0.9" rotation="0 0 0" material="color: white; opacity: 0.5"></a-mixin>
        </a-assets>

        <a-light type="point" color="blue" position="0 15 0"></a-light>
        <a-entity position="3 0 -8" rotation="0 320 0">
            <a-entity gltf-model="#door" scale="1.5 1.5 1.5" animation-mixer="clip: *;"></a-entity>
            <a-text position="-1.5 3.5 0.8" scale="2.2 2.2 2.2"  value="EXIT COLLECTION"></a-text>
        </a-entity>

        {% set maxCols = 5 %}
        {% set ns = namespace(xPos=(-1 * maxCols + 1), zPos=-1) %}
        
        {% for item in data %}
            <a-entity  mixin="cube" position="{{ ns.xPos }} 1 {{ ns.zPos }}">
                <a-text value="{{item['name']}}" position="-0.5 1.0 0"></a-text>
                <a-entity mixin="cube"></a-entity>
            </a-entity>
            {% if loop.index == maxCols %}
                {% set ns.xPos = (-1 * maxCols) + 1 %}
                {% set ns.zPos = zPos - 2 %}
            {% else %}
                {% set ns.xPos = ns.xPos + 2 %}
            {% endif %}

        {% endfor %}


        <a-entity environment="preset: arches; skyType: atmosphere"></a-entity>
        <a-entity id="rig" movement-controls="fly: true; easingY: 15" position="0 1 4">
            <a-entity camera position="0 1 4" look-controls="pointerLockEnabled: true"></a-entity>
        </a-entity>

    </a-scene>

    <script type = "text/javascript" src = "{{ url_for('static', filename = 'index.js') }}" ></script>
</body>
</html>
